function intInRange(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function intInRangeFloat(e,t){return Math.random()*(t-e+1)+e}var templates={head:Handlebars.compile("<h1>{{ number }}</h1><h2>{{ name }}</h2>"),body:Handlebars.compile("		<div class='term-description'>{{{ content.term }}}</div>		<div class='media'>			<div class='progress-bar'></div>			{{#if content.media.photo }}				<img src='{{content.media.photo}}'/>			{{else}}				{{#if content.media.video}}					<video autoplay><source src='{{content.media.video}}' type='video/mp4'></video>					<p class='caption'>Lorem ipsum sit dolor amet.</p>				{{else}}					<script>console.warn('No media assets found for {{ number }} {{ name }}');</script>				{{/if}}			{{/if}}		</div>		<div class='project-desc'>{{{ content.project_desc }}}</div>		<div class='project-meta'>{{{ content.project_meta }}}</div>")};$(function(){var e=!1;$("#pause").on("click",function(){$(this).toggleClass("paused");e=!e});var t=parseInt(window.location.hash.substring(1));t===0&&$("body").scrollLeft(0);t===1&&$("body").scrollLeft(960);t===2&&$("body").scrollLeft(1920);var n=document.querySelectorAll("canvas"),r=$("section"),i=$("#interstitial"),s=i.find(".L .term"),o=i.find(".A .term"),u=i.find(".B .term"),a=$(window).width(),f=$(window).height();$(window).on("nextTerm",function(t,n){if(!e){console.log("was last state interstitial?",p);if(r.eq(0).attr("data-theme")==="LAB"){h(s,"left",n[0]);h(o,"center",n[1]);h(u,"right",n[2])}n.forEach(function(e,t){l(e,t)});p=!1}});$(window).on("labLogo",function(){if(!e){console.log("was last state interstitial?",p);r.attr("data-theme","LAB");$("section header, section article").empty();c(s);c(o);c(u);for(var t=0;t<n.length;++t){var i=n[t].getContext("2d");i.clearRect(0,0,i.canvas.width,i.canvas.height)}p=!0}});var l=function(e,t){var n=$("section").eq(t),r={head:templates.head(e),body:templates.body(e)};setTimeout(function(){n.attr("data-theme",e.theme);n.addClass("transitioning");setTimeout(function(){if(!p){console.log("removing .transition-term(s)");$(".transition-term").fadeOut(2e3,function(){$(this).remove()})}n.find("header").html(r.head);n.find("article").html(r.body);var t=new Springy.Graph;t.loadJSON(e.related);var i=n.find("canvas").springy({graph:t});n.removeClass("transitioning");n.find(".progress-bar").addClass("active")},t*500+2e3)},t*1e3+1e3)},c=function(e){console.log("show interstitial");e.each(function(e){var t=$(this);setTimeout(function(){t.css({opacity:1,"-webkit-transform":"scale(1) translate3d(0px,0px,0px)"})},e*30)})},h=function(e,t,n){var r=i.find(".term-"+n.number).first().clone().addClass("transition-term").text(n.name);t==="left"?r.appendTo(i.find(".L")):t==="center"?r.appendTo(i.find(".A")):t==="right"&&r.appendTo(i.find(".B"));setTimeout(function(){r.addClass("active")},10);e.each(function(e){var n=$(this),r=10;t==="left"?setTimeout(function(){n.css({opacity:0,"-webkit-transform":"scale("+intInRangeFloat(.5,3.2)+") translate3d("+intInRange(-900,-1200)+"px,"+intInRange(-1200,1200)+"px,0px)"})},e*r):t==="center"?setTimeout(function(){n.css({opacity:0,"-webkit-transform":"scale("+intInRangeFloat(.5,3.2)+") translate3d("+intInRange(-900,900)+"px,"+intInRange(-1200,1200)+"px,0px)"})},e*r):t==="right"&&setTimeout(function(){n.css({opacity:0,"-webkit-transform":"scale("+intInRangeFloat(.5,3.2)+") translate3d("+intInRange(900,1200)+"px,"+intInRange(-1200,1200)+"px,0px)"})},e*r)})};r.attr("data-theme","LAB");var p=!0;$(".term").each(function(){var e=$(this);e.text()==" "&&e.remove();var t=e.attr("class").split(" ");if(t[1]){var n=parseInt(t[1].replace(/^\D+/g,""),10)-1;e.addClass(BGLTerms[n].theme)}else{var r=parseInt(e.find("span").attr("class").replace(/^\D+/g,""),10);e.addClass(BGLTerms[r].theme)}})});
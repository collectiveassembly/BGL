function intInRange(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function intInRangeFloat(e,t){return Math.random()*(t-e+1)+e}var templates={head:Hogan.compile("<h1>{{ number }}</h1><h2>{{ name }}</h2>"),body:Hogan.compile("		<div class='intro'>{{ content.intro }}</div>		<div class='media'>			{{#content.media.photo}}				<img src='{{content.media.photo}}'/>			{{/content.media.photo}}			{{#content.media.video}}				<video autoplay><source src='{{content.media.video}}' type='video/mp4'></video>			{{/content.media.video}}		</div>		<div class='idea'>{{ content.idea }}</div>")};$(function(){$("svg").remove();var e=parseInt(window.location.hash.substring(1));e===0&&$("body").scrollLeft(0);e===1&&$("body").scrollLeft(960);e===2&&$("body").scrollLeft(1920);var t=document.querySelectorAll("canvas"),n=$("section"),r=$(window).width(),i=$(window).height(),s={};s.$els=$("#LAB-L g, #LAB-L > path");s.total=s.$els.length;s.lastIndex=s.total-1;var o={};o.$els=$("#LAB-A g, #LAB-A > path");o.total=o.$els.length;o.lastIndex=o.total-1;var u={};u.$els=$("#LAB-B svg g, #LAB-B > path");u.total=u.$els.length;u.lastIndex=u.total-1;$(window).on("nextTerm",function(e,t){if(n.eq(0).attr("data-theme")==="LAB"){l(s);l(o);l(u)}t.forEach(function(e,t){a(e,t)})});$(window).on("labLogo",function(){n.attr("data-theme","LAB");$("section header, section article").html('<p class="notify">LAB</p>');f(s);f(o);f(u);for(var e=0;e<t.length;++e){var r=t[e].getContext("2d");r.clearRect(0,0,r.canvas.width,r.canvas.height)}});var a=function(e,t){var n=$("section").eq(t),r={head:templates.head.render(e),body:templates.body.render(e)};setTimeout(function(){n.attr("data-theme",e.theme);n.addClass("transitioning");setTimeout(function(){n.find("header").html(r.head);n.find("article").html(r.body);var t=new Springy.Graph;t.loadJSON(e.related);var i=n.find("canvas").springy({graph:t});n.removeClass("transitioning")},t*1e3+1e3)},t*1e3+1e3)},f=function(e){console.log("showing interstitial",e);e.$els.each(function(t){t===e.lastIndex&&e.$els.each(function(e){var t=$(this);setTimeout(function(){t.removeAttr("style").find("path").removeAttr("style")},e*50)})})},l=function(e){console.log("scattering interstitial",e);e.$els.each(function(e){var t=$(this);setTimeout(function(){e%2?t.css({"-webkit-transform":"scale("+intInRangeFloat(.5,3.2)+") translate3d("+intInRange(-900,-1200)+"px,"+intInRange(-900,-1200)+"px,0px)"}):t.css({"-webkit-transform":"scale("+intInRangeFloat(.5,3.2)+") translate3d("+intInRange(-900,-1200)+"px,"+intInRange(900,1200)+"px,0px)"})},e*150)})};n.attr("data-theme","LAB")});
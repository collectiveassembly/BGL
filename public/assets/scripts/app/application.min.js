function intInRange(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function intInRangeFloat(e,t){return Math.random()*(t-e+1)+e}var templates={head:Hogan.compile("<h1>{{ number }}</h1><h2>{{ name }}</h2>"),body:Hogan.compile("		<div class='intro'>{{ content.intro }}</div>		<div class='media'>			{{#content.media.photo}}				<img src='{{content.media.photo}}'/>			{{/content.media.photo}}			{{#content.media.video}}				<video autoplay><source src='{{content.media.video}}' type='video/mp4'></video>			{{/content.media.video}}		</div>		<div class='idea'>{{ content.idea }}</div>")};$(function(){var e=parseInt(window.location.hash.substring(1));e===0&&$("body").scrollLeft(0);e===1&&$("body").scrollLeft(960);e===2&&$("body").scrollLeft(1920);var t=document.querySelectorAll("canvas"),n=$("section"),r=$("#interstitial"),i=r.find(".letter.L > div"),s=r.find(".letter.A > div"),o=r.find(".letter.B > div"),u=$(window).width(),a=$(window).height();$(window).on("nextTerm",function(e,t){if(n.eq(0).attr("data-theme")==="LAB"){c(i,"left");c(s,"center");c(o,"right")}t.forEach(function(e,t){f(e,t)})});$(window).on("labLogo",function(){n.attr("data-theme","LAB");$("section header, section article").empty();l(i);l(s);l(o);for(var e=0;e<t.length;++e){var r=t[e].getContext("2d");r.clearRect(0,0,r.canvas.width,r.canvas.height)}});var f=function(e,t){var n=$("section").eq(t),r={head:templates.head.render(e),body:templates.body.render(e)};setTimeout(function(){n.attr("data-theme",e.theme);n.addClass("transitioning");setTimeout(function(){n.find("header").html(r.head);n.find("article").html(r.body);var t=new Springy.Graph;t.loadJSON(e.related);var i=n.find("canvas").springy({graph:t});n.removeClass("transitioning")},t*500+2e3)},t*1e3+1e3)},l=function(e){console.log("show interstitial");e.each(function(e){var t=$(this);setTimeout(function(){t.css({opacity:1,"-webkit-transform":"scale(1) translate3d(0px,0px,0px)"})},e*30)})},c=function(e,t){if(typeof t=="undefined")var t="center";console.log("scatter interstitial in direction",t);e.each(function(e){var n=$(this),r=10;t==="left"?setTimeout(function(){n.css({opacity:0,"-webkit-transform":"scale("+intInRangeFloat(.5,3.2)+") translate3d("+intInRange(-900,-1200)+"px,"+intInRange(-1200,1200)+"px,0px)"})},e*r):t==="center"?setTimeout(function(){n.css({opacity:0,"-webkit-transform":"scale("+intInRangeFloat(.5,3.2)+") translate3d("+intInRange(-900,900)+"px,"+intInRange(-1200,1200)+"px,0px)"})},e*r):t==="right"?setTimeout(function(){n.css({opacity:0,"-webkit-transform":"scale("+intInRangeFloat(.5,3.2)+") translate3d("+intInRange(900,1200)+"px,"+intInRange(-1200,1200)+"px,0px)"})},e*r):console.warn("no animDirection specified")})};n.attr("data-theme","LAB");$(".term").each(function(){var e=$(this),t=e.attr("class").split(" ");if(t[1]){var n=parseInt(t[1].replace(/^\D+/g,""),10)-1;e.addClass(BGLTerms[n].theme)}else{var r=parseInt(e.find("span").attr("class").replace(/^\D+/g,""),10);e.addClass(BGLTerms[r].theme)}})});
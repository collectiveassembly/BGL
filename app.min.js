function sendWSEvent(){setTimeout(sendWSEvent,2e4);var e=terms.terms.slice().sort(function(){return.5-Math.random()}),t=e.slice(0,3);for(var n=0;n<connections.length;n++){var r=connections[n];if(termCounter===0)var i={name:"labLogo",args:[]};else var i={name:"nextTerm",args:t};r.send(JSON.stringify(i))}termCounter++;termCounter%=10}var express=require("express"),async=require("async"),fs=require("fs"),WebSocketServer=require("ws").Server,terms=require("./public/assets/scripts/app/terms-interim"),app=express(),wss=new WebSocketServer({port:9e3}),connections=[];wss.on("connection",function(e){e.on("close",function(){console.log("stopping client");var t=[];for(var n=0;n<connections.length;n++){var r=connections[n];r!==e&&t.push(r)}connections=t});connections.push(e)});var termCounter=0;sendWSEvent();var log=fs.createWriteStream("./log/BGL.log",{flags:"a"});app.use(express.static(__dirname+"/public"));app.listen(3e3,"127.0.0.1");log.write("BGL Started"+new Date+"\n");